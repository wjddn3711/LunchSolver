<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <!--    <meta id="_csrf" name="_csrf" th:content="${_csrf.token}"/>-->
    <!--    <meta id="_csrf_header" name="_csrf_header" th:content="${_csrf.headerName}"/>-->
    <title>Title</title>
<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>

<h1>OAuth Test 중</h1>
<div class="col-md-12">
    <!--    로그인 기능 영역 -->
    <div class="row">
        <div class="col-md-6">
            <th:block th:if="${userName != null}">
                Logged in as: <span id="user" th:text="${userName}"></span>
                <a href="/logout" class="btn btn-info active" role="button">Logout</a>
            </th:block>
            <th:block th:unless="${userName != null}">
                <a href="/oauth2/authorization/google" class="btn btn-success active"
                   role="button">Google Login</a>
                <a href="/oauth2/authorization/naver" class="btn btn-secondary active"
                   role="button">Naver Login</a>
            </th:block>
        </div>
    </div>
</div>
<div id="myLocationInfo"></div>
<div id="fullAddress"></div>

<script>

    // /* 비동기적으로 현재 위치를 알아내어 지정된 요소에 출력한다. */
    // function whereami(elt) {
    //     // 이 객체를 getCurrentPosition() 메서드의 세번째 인자로 전달한다.
    //     var options = {
    //         // 가능한 경우, 높은 정확도의 위치(예를 들어, GPS 등) 를 읽어오려면 true로 설정
    //         // 그러나 이 기능은 배터리 지속 시간에 영향을 미친다.
    //         enableHighAccuracy: false, // 대략적인 값이라도 상관 없음: 기본값
    //
    //         // 위치 정보가 충분히 캐시되었으면, 이 프로퍼티를 설정하자,
    //         // 위치 정보를 강제로 재확인하기 위해 사용하기도 하는 이 값의 기본 값은 0이다.
    //         maximumAge: 30000,     // 5분이 지나기 전까지는 수정되지 않아도 됨
    //
    //         // 위치 정보를 받기 위해 얼마나 오랫동안 대기할 것인가?
    //         // 기본값은 Infinity이므로 getCurrentPosition()은 무한정 대기한다.
    //         timeout: 15000    // 15초 이상 기다리지 않는다.
    //     }
    //
    //     if (navigator.geolocation) // geolocation 을 지원한다면 위치를 요청한다.
    //         navigator.geolocation.getCurrentPosition(success, error, options);
    //     else
    //         elt.innerHTML = "이 브라우저에서는 Geolocation이 지원되지 않습니다.";
    //
    //
    //     // geolocation 요청이 실패하면 이 함수를 호출한다.
    //     function error(e) {
    //         // 오류 객체에는 수치 코드와 텍스트 메시지가 존재한다.
    //         // 코드 값은 다음과 같다.
    //         // 1: 사용자가 위치 정보를 공유 권한을 제공하지 않음.
    //         // 2: 브라우저가 위치를 가져올 수 없음.
    //         // 3: 타임아웃이 발생됨.
    //         elt.innerHTML = "Geolocation 오류 " + e.code + ": " + e.message;
    //     }
    //
    //
    //     // geolocation 요청이 성공하면 이 함수가 호출된다.
    //     function success(pos) {
    //
    //         console.log(pos); // [디버깅] Position 객체 내용 확인
    //
    //         // 항상 가져올 수 있는 필드들이다. timestamp는 coords 객체 내부에 있지 않고,
    //         // 외부에서 가져오는 필드라는 점에 주의하다.
    //         var msg = "당신의 " +
    //             " 위도 : " + pos.coords.latitude +
    //             " 경도 : " + pos.coords.longitude
    //
    //         elt.innerHTML = msg;     // 모든 위치 정보를 출력한다.
    //         console.log(pos.coords.longitude)
    //         getFullAddress(pos.coords.longitude, pos.coords.latitude); // 위도, 경도를 통하여 주소값을 띄워준다
    //     }
    // }
    //
    // function getFullAddress(longtitude, latitude) {
    //
    //     var AddressDTO={
    //         x : longtitude,
    //         y : latitude
    //     };
    //
    //     $.ajax({
    //         url: "/user/api/getFullAddress",
    //         data: AddressDTO,
    //         type:"POST",
    //     }).done(function (fragment) {
    //         console.log('done');
    //         $("#fullAddress").replaceWith(fragment);
    //         getRestaurantData(longtitude, latitude);
    //     });
    // }
    //
    // function getRestaurantData(longtitude, latitude){
    //     var GetRestaurantRequest={
    //         x : longtitude,
    //         y : latitude
    //     };
    //
    //     $.ajax({
    //         url: "/user/api/getRestaurantData",
    //         data: GetRestaurantRequest,
    //         type:"PUT",
    //     }).done(function (fragment) {
    //         console.log('input succeed');
    //     });
    // }
    //
    // // 나의 위치정보를 출력할 객체 구하기
    // var elt = document.getElementById("myLocationInfo");
    //
    // // 나의 위치정보 출력하기
    // whereami(elt);
</script>
</body>
</html>